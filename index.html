<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Webshop (PWA)</title>
    <link rel="icon" type="image/ico" href="favicon.ico">

    <link rel="manifest" href="manifest.json?v=3" />
    <!-- ios support -->
    <link rel="apple-touch-icon" href="icon-192x192.png" />
    <link rel="apple-touch-icon" href="icon-384x384.png" />
    <link rel="apple-touch-icon" href="icon-512x512.png" />
    <meta name="apple-mobile-web-app-status-bar" content="#1a2a4b" />
    <meta name="theme-color" content="#1a2a4b" />

    <!-- Bootstrap core CSS -->
    <link href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="https://getbootstrap.com/docs/4.0/examples/sticky-footer-navbar/sticky-footer-navbar.css"
        rel="stylesheet">
    <style>
        .bg-dark {
            background-color: #1a2a4b !important;
        }

        .btn-outline-success {
            color: #95c11f !important;
            border-color: #95c11f !important;
        }
    </style>

    <!-- POP_UP CSS-->
    <link rel="stylesheet" type="text/css" href="popup.css" />
</head>

<body>

    <header>
        <!-- Fixed navbar -->
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="#">Webshop</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
                aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Assortiment <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Aanbiedingen <span class="sr-only">(current)</span></a>
                    </li>
                </ul>
                <form class="form-inline mt-2 mt-md-0">
                    <input class="form-control mr-sm-2" type="text" placeholder="Zoeken" aria-label="Search">
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Zoeken</button>
                </form>
            </div>
        </nav>
    </header>

    <!-- Begin page content -->
    <main role="main" class="container">
        <h1 class="mt-5">Voordelen van een Progressive Web App.</h1>
        <p class="lead">
        <ul>
            <li>Eenvoudig te implementeren in de bestaande webshop.</li>
            <li>Aanpassingen aan de webshop zijn ook direct beschikbaar in de app.</li>
            <li>Geen extra stappen nodig voor deployment.</li>
            <li>De app is ook te instaleren op een Windows PC of een Mac.</li>
            <li>Geen derde partij nodig voor onderhoud van de app.</li>
            <li>Mogelijkheid tot push notificaties.</li>
        </ul>
        </p>
        <!-- <p>
            <button class="main__button main__button--js">Open PWA Prompt</button>
        </p> -->
    </main>

    <!-- PWA POP_UP IOS START -->
    <div class="ios-pwa-prompt ios-pwa-prompt__overlay ios-pwa-prompt__overlay--hidden ios-pwa-prompt__overlay--js"
        aria-label="Close" role="button" id="ios-pwa-modal-overlay">
        <div class="ios-pwa-prompt__container ios-pwa-prompt__container--hidden ios-pwa-prompt__container--js"
            aria-describedby="ios-pwa-modal-description" aria-labelledby="ios-pwa-modal-title" role="dialog"
            id="ios-pwa-modal-container">
            <div class="ios-pwa-header">
                <p id="ios-pwa-modal-title" class="ios-pwa-header__title">
                    Add to Home Screen
                </p>
                <button class="ios-pwa-header__button ios-pwa-header__button--js" id="ios-pwa-modal-button" onclick="toggleIosPwaPrompt()">
                    Cancel
                </button>
            </div>
            <div class="ios-pwa-body">
                <div class="ios-pwa-body__description">
                    <p id="ios-pwa-modal-description" class="ios-pwa-text">
                        This website has app functionality. Add it to your home screen to use it in fullscreen and
                        while offline.
                    </p>
                </div>
            </div>
            <div class="ios-pwa-instruction">
                <div class="ios-pwa-instruction__step">
                    <svg xmlns="http://www.w3.org/2000/svg"
                        class="ios-pwa-instruction__icon ios-pwa-instruction__icon--share" viewBox="0 0 566 670">
                        <path
                            d="M255 12c4-4 10-8 16-8s12 3 16 8l94 89c3 4 6 7 8 12 2 6 0 14-5 19-7 8-20 9-28 2l-7-7-57-60 2 54v276c0 12-10 22-22 22-12 1-24-10-23-22V110l1-43-60 65c-5 5-13 8-21 6a19 19 0 0 1-16-17c-1-7 2-13 7-18l95-91z" />
                        <path
                            d="M43 207c16-17 40-23 63-23h83v46h-79c-12 0-25 3-33 13-8 9-10 21-10 33v260c0 13 0 27 6 38 5 12 18 18 30 19l14 1h302c14 0 28 0 40-8 11-7 16-21 16-34V276c0-11-2-24-9-33-8-10-22-13-34-13h-78v-46h75c13 0 25 1 37 4 16 4 31 13 41 27 11 17 14 37 14 57v280c0 20-3 41-15 58a71 71 0 0 1-45 27c-11 2-23 3-34 3H109c-19-1-40-4-56-15-14-9-23-23-27-38-4-12-5-25-5-38V270c1-22 6-47 22-63z" />
                    </svg>
                    <p class="ios-pwa-text ios-pwa-text__bold">
                        1) Press the 'Share' button on the menu bar below.
                    </p>
                </div>
                <div class="ios-pwa-instruction__step">
                    <svg xmlns="http://www.w3.org/2000/svg"
                        class="ios-pwa-instruction__icon ios-pwa-instruction__icon--home" viewBox="0 0 578 584">
                        <path
                            d="M101 35l19-1h333c12 0 23 0 35 3 17 3 34 12 44 27 13 16 16 38 16 58v329c0 19 0 39-8 57a65 65 0 0 1-37 37c-18 7-38 7-57 7H130c-21 1-44 0-63-10-14-7-25-20-30-34-6-15-8-30-8-45V121c1-21 5-44 19-61 13-16 33-23 53-25m7 46c-10 1-19 6-24 14-7 8-9 20-9 31v334c0 12 2 25 10 34 9 10 23 12 35 12h336c14 1 30-3 38-15 6-9 8-20 8-31V125c0-12-2-24-10-33-9-9-22-12-35-12H121l-13 1z" />
                        <path
                            d="M271 161c9-11 31-10 38 4 3 5 3 11 3 17v87h88c7 0 16 1 21 7 6 6 7 14 6 22a21 21 0 0 1-10 14c-5 4-11 5-17 5h-88v82c0 7-1 15-6 20-10 10-29 10-37-2-3-6-4-13-4-19v-81h-87c-8-1-17-3-23-9-5-6-6-15-4-22a21 21 0 0 1 11-14c6-3 13-3 19-3h84v-88c0-7 1-14 6-20z" />
                    </svg>
                    <p class="ios-pwa-text ios-pwa-text__bold">
                        2) Press 'Add to Home Screen'.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- PWA POP_UP IOS END -->

    <footer class="footer">
        <div class="container">
            <span class="text-muted">Webshop (C) 2022. V8.</span>
        </div>
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="view-source:https://getbootstrap.com/docs/4.0/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="https://getbootstrap.com/docs/4.0/assets/js/vendor/popper.min.js"></script>
    <script src="https://getbootstrap.com/docs/4.0/dist/js/bootstrap.min.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker
                .register('sw.js?v=3')
                .then(function () { console.log("Tada! Your service worker is now registered"); });
        }
    </script>
    <!-- IOS PWA POP_UP -->
    <script>
        // Detects if device is on iOS 
        const isIos = () => {
            const userAgent = window.navigator.userAgent.toLowerCase();
            return /iphone|ipad|ipod/.test(userAgent);
        }

        // Detects if device is in standalone mode
        const isInStandaloneMode = () => ('standalone' in window.navigator) && (window.navigator.standalone);

        const nodeElements = {
            mainBtn: document.querySelector(".main__button"),
            iosPwaPromptOverlay: document.querySelector('.ios-pwa-prompt__overlay--js'),
            iosPwaPromptContainer: document.querySelector('.ios-pwa-prompt__container--js'),
            iosPwaPromptBtn: document.querySelector('.ios-pwa-header__button--js')
        }


        function toggleIosPwaPrompt() {
            const { iosPwaPromptOverlay, iosPwaPromptContainer } = nodeElements;
            iosPwaPromptOverlay.classList.toggle("ios-pwa-prompt__overlay--hidden")
            iosPwaPromptContainer.classList.toggle("ios-pwa-prompt__container--hidden")
            iosPwaPromptOverlay.classList.toggle("ios-pwa-prompt__overlay--visible")
            iosPwaPromptContainer.classList.toggle("ios-pwa-prompt__container--visible")
        }

        function onTogglePwaPrompt(nodeElement) {
            nodeElement.addEventListener('click', function (e) {
                e.stopPropagation();
                toggleIosPwaPrompt();
            })
        }

        window.addEventListener('DOMContentLoaded', () => {
            onTogglePwaPrompt(nodeElements.mainBtn)
            onTogglePwaPrompt(nodeElements.iosPwaPromptOverlay)
            onTogglePwaPrompt(nodeElements.iosPwaPromptBtn)

            setTimeout(() => {
                toggleIosPwaPrompt()
            }, 1000)
        });

        // // Checks if should display install popup notification:
        // if (isIos() && !isInStandaloneMode()) {
        //     toggleIosPwaPrompt()
        // }
        if (/iPhone|iPad|iPod/i.test(navigator.userAgent) && !isInStandaloneMode()) {
            toggleIosPwaPrompt()
        }
    </script>
</body>

</html>